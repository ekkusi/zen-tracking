extend type Query {
  getChallenge(id: ID!): Challenge
  getChallenges(filters: ChallengeFilters): [Challenge!]!
  getParticipations(filters: ParticipationFilters): [ChallengeParticipation!]!
  getParticipation(challengeId: ID!, userName: ID!): ChallengeParticipation
  getMarkings(participationId: ID!): [Marking!]!
  getUserTransferParticipation: ChallengeParticipation
}

extend type Mutation {
  createChallenge(challenge: CreateChallengeInput!): Challenge!
  updateChallenge(id: ID!, args: UpdateChallengeInput!): Challenge!
  deleteChallenge(id: ID!): Boolean!
  createParticipation(input: CreateParticipationInput!): ChallengeParticipation!
  deleteParticipation(challengeId: ID!): Boolean!
  addMarking(participationId: ID!, marking: MarkingCreateInput!): Marking!
  editMarking(id: ID!, marking: MarkingUpdateInput!): Marking!
  deleteMarking(id: ID!): Boolean!
  transferUserMarkings(challengeId: ID!): Boolean!
}

enum ChallengeStatus {
  SUGGESTION
  UPCOMING
  ACTIVE
  ENDED
}

type Challenge {
  id: ID!
  name: String!
  description: String!
  status: ChallengeStatus!
  creator: User!
  isPrivate: Boolean!
  startDate: Date
  endDate: Date
  participations: [ChallengeParticipation!]!
}

type ChallengeParticipation {
  id: ID!
  challenge: Challenge!
  user: User!
  markings: [Marking!]!
  isPrivate: Boolean!
  startDate: Date
  endDate: Date
}

input CreateChallengeInput {
  name: String!
  description: String!
  isPrivate: Boolean!
  startDate: Date
  endDate: Date
}

input UpdateChallengeInput {
  name: String
  description: String
  isPrivate: Boolean
  startDate: Date
  endDate: Date
}

input CreateParticipationInput {
  challengeId: ID!
  isPrivate: Boolean!
  startDate: Date
  endDate: Date
}

input UpdateParticipationInput {
  challengeId: ID
  isPrivate: Boolean
  startDate: Date
  endDate: Date
}

type Marking {
  id: ID!
  date: Date!
  rating: Int!
  isPrivate: Boolean!
  comment: String
  photoUrl: String
}

input MarkingCreateInput {
  rating: Int!
  isPrivate: Boolean!
  comment: String
  date: Date
  photoUrl: String
}

input MarkingUpdateInput {
  isPrivate: Boolean
  rating: Int
  comment: String
  date: Date
  photoUrl: String
}

input ChallengeFilters {
  creatorName: ID
  status: ChallengeStatus
  startDate: DateFilter
  endDate: DateFilter
}

input ParticipationFilters {
  participantName: ID
  startDate: DateFilter
  endDate: DateFilter
}
